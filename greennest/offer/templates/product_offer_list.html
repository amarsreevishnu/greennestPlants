{% extends 'greenest_admin/base.html' %}
{% load static %}
{% block content %}


<div class="col-lg-10 p-0" style="background: #f8f9fa;">
      <div class="main-content">

        <!-- Top section -->
        <div class="content-section d-flex justify-content-between align-items-center flex-wrap">
          <div>
            <h4 class="fw-bold mb-1">ðŸ“‹ Product Offers</h4>
            
          </div>
          <div class="d-flex align-items-center mt-lg-0 me-5 ">
                {% comment %} <form class="d-none d-md-block me-3"  method="get" id="search-form">
                    <input 
                    id="search-input"
                    class="form-control rounded-pill px-3" 
                    placeholder="Search"  
                    style="min-width:300px;"
                    autocomplete="off">
                    <span id="clear-btn" class="position-absolute top-0 end-0 me-5 mt-1" style="cursor: pointer; display: none;" onclick="clearInput()">âœ–</span>  
                </form> {% endcomment %}
<a href="{% url 'product_offer_create' %}" class="btn btn-success mb-3">Add Offer</a>
            <div class="d-flex align-items-center profile-area">  
              
          <div>
            
          </div>
            </div>
          </div>
        </div>

  <!-- main section -->
<div class="content-section">
  <div class="table-responsive">
            
     


<table class="table table-bordered">
    <thead>
        <tr>
            <th>Product</th>
            <th>Discount (%)</th>
            <th>Start Date</th>
            <th>End Date</th>
            <th>Status</th>
            <th>Actions</th>
        </tr>
    </thead>
    <tbody>
        {% for offer in offers %}
        <tr>
            <td>{{ offer.product.name }}</td>
            <td>{{ offer.discount_percentage }}%</td>
            <td>{{ offer.start_date }}</td>
            <td>{{ offer.end_date }}</td>
            <td>
    {% if offer.end_date < now %}
        <span class="badge bg-danger">Expired</span>
    {% elif offer.is_active %}
        <span class="badge bg-success">Active</span>
    {% else %}
        <span class="badge bg-secondary">Inactive</span>
    {% endif %}
</td>

            <td>
                <a href="{% url 'product_offer_edit' offer.pk %}" class="btn  btn-sm"><i class="bi bi-pencil-square text-primary"></i></a>
                <a href="{% url 'product_offer_delete' offer.pk %}" class="btn  btn-sm"><i class="bi bi-trash text-danger"></i></a>
                 {% if offer.is_active %}
        <a href="{% url 'product_offer_toggle' offer.pk %}" 
           class="btn  btn-sm">
           <i class="bi bi-toggle-off text-warning"></i>
        </a>
    {% else %}
        <a href="{% url 'product_offer_toggle' offer.pk %}" 
           class="btn  btn-sm">
           <i class="bi bi-toggle-on text-success"></i>
        </a>
    {% endif %}
            </td>
        </tr>
        {% empty %}
        <tr><td colspan="6">No offers found.</td></tr>
        {% endfor %}
    </tbody>
</table>
  
  </div>
</div>

{% endblock %}
