{% extends "greenest_admin/base.html" %}
{% load static %}

{% block admin_products_list %}
<style>
  .badgee.pending { color: #0d6efd; }
  .badgee.processing { color: #6c757d; }
  .badgee.shipped { color: #0dcaf0; }
  .badgee.delivered { color: #198754; }
  .badgee.completed { color: #20c997; }
  .badgee.cancelled { color: #dc3545; }
  .badgee.partially_cancelled { color: #fd7e14; }
  .badgee.partially_returned { color: #bb463fff; }
  .badgee.return_requested { color: #ffc107; color: #000; }
  .badgee.returned { color: #6f42c1; }

  .table-wrapper {
  
  }

  table {
    width: 100%;
    border-collapse: collapse;
    margin-bottom: 20px;
  }

  th, td {
    padding: 8px;
    
   
    border: 1px solid #ddd;
  }

</style>

<div class="col-lg-10 p-0" style="background: #f8f9fa;">
  <div class="main-content">
    <div class="content-section d-flex justify-content-between align-items-center flex-wrap">
      <div>
        <h1>Coupon Management</h1>
      </div>
      <div class="d-flex align-items-center mt-2 mt-lg-0 me-5">
        <a href="{% url 'coupon_create' %}" class="btn btn-success rounded-pill px-3">Create Coupon</a>
      </div>
    </div>

    <div class="content-section">
      <div class="table">
        <table>
          <tr>
            <th>Code</th>
            <th>Discount</th>
            <th>Max Discount (₹)</th>
            <th>Min Order (₹)</th>
            <th>Valid From</th>
            <th>Valid To</th>
            <th>Status</th>
            <th>Actions</th>
          </tr>
          {% for coupon in coupons %}
          <tr>
            <td>{{ coupon.code }}</td>
            <td>{{ coupon.discount }}%</td>
            <td>{% if coupon.max_discount_amount %}₹{{ coupon.max_discount_amount }}{% else %}-{% endif %}</td>
            <td>{% if coupon.min_order_value %}₹{{ coupon.min_order_value }}{% else %}-{% endif %}</td>
            <td>
              {{ coupon.valid_from|date:"d M Y" }}<br>
              {{ coupon.valid_from|time:"h:i A" }}
            </td>
            <td>
              {{ coupon.valid_to|date:"d M Y" }}<br>
              {{ coupon.valid_to|time:"h:i A" }}
            </td>
            <td>  {% if coupon.is_expired %}
                    <span class="text-danger fw-bold">Expired</span>
                  {% else %}
                  {%if coupon.active %}<span class="text-success"> ✅ Active</span>{% else %}<span class="text-danger"> ❌ Inactive </span>{% endif %} {% endif %}</td>
            <td class="actions">
              <a href="{% url 'coupon_update' coupon.id %}"  class=" text-info btn-sm me-1" ><i class="bi bi-pencil-square"></i></a>
              <a href="{% url 'coupon_delete' coupon.id %}"class=" text-danger btn-sm"><i class="bi bi-trash"></i></a>
            </td>
          </tr>
          {% endfor %}
        </table>
      </div>   
    </div>
  </div>
</div>

{% endblock %}
